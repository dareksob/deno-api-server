services:
    e2e:
        build: ./e2e
        volumes:
            - ./e2e:/app
        environment:
            - host=deno-latest:8080
        depends_on:
            - deno-latest

    deno-1.15.1:
        image: denoland/deno:alpine-1.15.1
        working_dir: /app
        environment:
            - APP_ENV=development
        volumes:
            - ../../:/app
        entrypoint: /bin/sh /app/etc/bin/start

    deno-1.16.1:
        image: denoland/deno:alpine-1.16.1
        working_dir: /app
        environment:
            - APP_ENV=development
        volumes:
            - ../../:/app
        entrypoint: /bin/sh /app/etc/bin/start


    deno-latest:
        image: denoland/deno:alpine-1.25.2
        working_dir: /app
        environment:
            - APP_ENV=development
        ports:
            - 8080:8080
        volumes:
            - ../../:/app
        entrypoint: /bin/sh /app/etc/bin/start